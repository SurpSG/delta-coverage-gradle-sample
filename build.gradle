plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.10'
    id 'java-library'
    id 'jvm-test-suite'
    id 'jacoco'
    id("io.github.surpsg.delta-coverage") version "1.1.0"
}

group = "org.example"
version = "1.0-SNAPSHOT"

repositories {
    mavenCentral()
}

kotlin {
    jvmToolchain(18)
}

testing.suites {
    test {
        useJUnitJupiter()
    }
}


deltaCoverageReport {
    diffSource.git.compareWith('refs/remotes/origin/main')

    violationRules.failIfCoverageLessThan(0.5)

    reports {
        html.set(true)
    }
}
